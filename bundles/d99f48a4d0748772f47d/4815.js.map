{"version":3,"file":"bundles/d99f48a4d0748772f47d/4815.js","mappings":"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","sources":["webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","React","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","serializedParts","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","_editorStateTransfer$","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","_ref","props","_objectWithoutProperties","_excluded","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","async","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","document","DOMParser","parseFromString","Array","from","querySelectorAll","forEach","mention","getAttribute","replaceWith","innerText","innerHTML","href","permalinkParts","parsePermalink","isNotNull","roomIdOrAlias","convertPlainTextToBody","bodyPrefix","mxEvent","lines","split","l","trim","getTextReplyFallback","formattedBodyPrefix","html","mxReply","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Emote","Text","isMarkdownEnabled","formattedBody","plainToRich","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","roomId","posthogEvent","eventName","messageType","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","_content$msgtype$star","_content$msgtype","sendAnyway","shouldSendAnyway","dis","dispatch","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","event","CHAT_EFFECTS","effect","containsEmoji","emojis","command","resp","sendRoundTripMetric","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"sourceRoot":""}