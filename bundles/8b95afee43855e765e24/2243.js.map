{"version":3,"file":"bundles/8b95afee43855e765e24/2243.js","mappings":"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","sources":["webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack://element-web/../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["endEditing","roomContext","dis","dispatch","action","Action","EditEvent","event","timelineRenderingType","FocusSendMessageComposer","context","cancelPreviousPendingEdit","mxClient","editorStateTransfer","previousEdit","getEvent","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","async","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","content","document","DOMParser","parseFromString","Array","from","querySelectorAll","forEach","mention","getAttribute","replaceWith","innerText","innerHTML","href","permalinkParts","parsePermalink","isNotNull","roomIdOrAlias","convertPlainTextToBody","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Emote","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","_ref","_content","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","messageType","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","_content$msgtype$star","_content$msgtype","sendAnyway","shouldSendAnyway","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"sourceRoot":""}